(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-938c648a"],{2173:function(t,e,a){"use strict";a("6e92")},"6e92":function(t,e,a){},ec74:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{attrs:{title:"解析脚本","body-style":{paddingBottom:0}}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-button",{style:{marginRight:"8px"},attrs:{icon:"close"},on:{click:t.onClose}},[t._v(" 取消")]),a("a-button",{attrs:{type:"primary",icon:"save"},on:{click:t.saveScript}},[t._v(" 保存")])],1),a("a-form-model",{ref:"ruleForm",attrs:{model:t.modal,layout:"vertical",rules:t.rules}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{directives:[{name:"show",rawName:"v-show",value:t.modal.scriptId,expression:"modal.scriptId"}],attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"ID",prop:"scriptId"}},[a("a-input",{attrs:{placeholder:"请输入脚本ID",disabled:!0},model:{value:t.modal.scriptId,callback:function(e){t.$set(t.modal,"scriptId",e)},expression:"modal.scriptId"}})],1)],1),a("a-col",{attrs:{span:t.modal.scriptId?8:12}},[a("a-form-model-item",{attrs:{label:"名称",prop:"scriptName"}},[a("a-input",{attrs:{placeholder:"请输入脚本名称"},model:{value:t.modal.scriptName,callback:function(e){t.$set(t.modal,"scriptName",e)},expression:"modal.scriptName"}})],1)],1),a("a-col",{attrs:{span:t.modal.scriptId?8:12}},[a("a-form-model-item",{attrs:{label:"说明",prop:"description"}},[a("a-input",{attrs:{placeholder:"请输入脚本说明"},model:{value:t.modal.description,callback:function(e){t.$set(t.modal,"description",e)},expression:"modal.description"}})],1)],1),a("a-col",{staticClass:"scriptModel",attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"JavaScript脚本",prop:"scriptContent"}},[a("codemirror",{staticStyle:{border:"1px #e8e3e3 solid"},attrs:{options:t.options},model:{value:t.modal.scriptContent,callback:function(e){t.$set(t.modal,"scriptContent",e)},expression:"modal.scriptContent"}})],1)],1)],1)],1)],1)],1)},o=[],s=(a("d3b7"),a("0fea")),i=a("c884");a("f9d4"),a("693d8"),a("9b74"),a("f6b6"),a("3c98"),a("cc10"),a("31c5");var n={name:"ResourceModel",components:{codemirror:i["codemirror"]},props:{scriptId:{type:String,default:void 0}},data:function(){return{title:"操作",visible:!1,confirmLoading:!1,modal:{scriptContent:"/**\n * 方法名transform不可修改,入参：data Object 源数据,出参：data Object 目标数据\n */\nfunction transform(data) {\n    return data;\n}"},url:{info:"/api/script/info",add:"/api/script/add",update:"/api/script/update"},rules:{scriptName:[{required:!0,message:"请输入脚本名称",trigger:"blur"}],scriptContent:[{required:!0,message:"请输入脚本内容",trigger:"blur"}]},options:{mode:{name:"text/javascript",json:!0},height:400,lineNumbers:!0,tabSize:2,theme:"base16-light",line:!0,autoCloseTags:!0,lineWrapping:!0,styleActiveLine:!0,extraKeys:{"Ctrl-Space":"autocomplete"},hintOptions:{tables:{}}}}},mounted:function(){var t=this;this.scriptId&&Object(s["a"])(this.url.info,{scriptId:this.scriptId}).then((function(e){t.modal=e.data}))},methods:{saveScript:function(){var t=this,e=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;e.confirmLoading=!0;var r,o=JSON.parse(JSON.stringify(t.modal));r=t.scriptId?Object(s["c"])(t.url.update,o):Object(s["b"])(t.url.add,o),r.then((function(t){200===t.code?(e.$message.success(t.message),e.onClose()):e.$message.warning(t.message)})).finally((function(){e.confirmLoading=!1,e.onClose()}))}))},onClose:function(){this.$router.push({name:"scriptList"})}}},c=n,l=(a("2173"),a("2877")),d=Object(l["a"])(c,r,o,!1,null,null,null);e["default"]=d.exports}}]);