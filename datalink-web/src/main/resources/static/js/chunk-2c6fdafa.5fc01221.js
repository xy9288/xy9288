(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c6fdafa"],{"0fea":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return l})),a.d(e,"e",(function(){return d}));var n=a("b775");function r(t,e){return Object(n["b"])({url:t,method:"post",data:e})}function o(t,e){return Object(n["b"])({url:t,method:"put",data:e})}function i(t,e){return Object(n["b"])({url:t,method:"get",params:e})}function l(t,e){return Object(n["b"])({url:t,params:e,method:"get",responseType:"blob"})}function d(t,e){return Object(n["b"])({url:t,method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}},1024:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("page-header-wrapper",{attrs:{breadcrumb:!1}},[e("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0},bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:7,sm:24}},[e("a-form-item",{attrs:{label:"变量名"}},[e("a-input",{attrs:{placeholder:"请输入变量名"},model:{value:t.queryParam.key,callback:function(e){t.$set(t.queryParam,"key",e)},expression:"queryParam.key"}})],1)],1),e("a-col",{attrs:{md:10,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1),e("a-col",{staticStyle:{"text-align":"right"},attrs:{md:7,sm:24}},[e("a-button",{attrs:{icon:"undo"},on:{click:t.loadData}},[t._v("刷新")]),e("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleAdd()}}},[t._v("新建变量")])],1)],1)],1)],1)]),e("a-card",{attrs:{"body-style":{minHeight:"500px"},bordered:!1}},[e("a-table",{ref:"table",attrs:{rowKey:"key",columns:t.columns,"data-source":t.dataSource,pagination:!1,loading:t.loading},scopedSlots:t._u([{key:"key",fn:function(a,n,r){return e("span",{},[e("a-tag",{attrs:{color:"SYSTEM"===n.type?"cyan":"blue"}},[t._v(t._s(a))])],1)}},{key:"serial",fn:function(a,n,r){return e("span",{},[t._v(" "+t._s(r+1)+" ")])}},{key:"type",fn:function(a,n,r){return e("span",{},[t._v(" "+t._s(n.memberName?n.memberName:"SYSTEM"===a?"系统变量":"自定义")+" ")])}},{key:"desc",fn:function(a,n,r){return e("span",{},[t._v(" "+t._s(a||"-")+" ")])}},{key:"action",fn:function(a,n){return e("span",{},[[e("a",{attrs:{disabled:"CUSTOM"!==n.type},on:{click:function(e){return t.handleEdit(n)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),t.dataSource.length?e("a-popconfirm",{attrs:{title:"删除此变量?"},on:{confirm:function(){return t.handleDelete(n)}}},[e("a",{attrs:{href:"javascript:;",disabled:"CUSTOM"!==n.type}},[t._v("删除")])]):t._e()]],2)}}])})],1),e("variable-model",{ref:"VariableModel",on:{ok:t.loadData}})],1)},r=[],o=a("0fea"),i=function(){var t=this,e=t._self._c;return e("a-modal",{attrs:{confirmLoading:t.confirmLoading,title:"全局变量",width:500,visible:t.visible,destroyOnClose:!0},on:{cancel:t.onClose}},[e("a-form-model",{ref:"ruleForm",attrs:{model:t.modal,layout:"vertical",rules:t.rules}},[e("a-form-model-item",{attrs:{label:"变量名",prop:"key"}},[e("a-input",{attrs:{placeholder:"请输入变量名",disabled:t.isEdit},model:{value:t.modal.key,callback:function(e){t.$set(t.modal,"key",e)},expression:"modal.key"}})],1),e("a-form-model-item",{attrs:{label:"值",prop:"value"}},[e("a-input",{attrs:{placeholder:"请输入变量值"},model:{value:t.modal.value,callback:function(e){t.$set(t.modal,"value",e)},expression:"modal.value"}})],1),e("a-form-model-item",{attrs:{label:"说明"}},[e("a-input",{attrs:{placeholder:"请输入说明"},model:{value:t.modal.desc,callback:function(e){t.$set(t.modal,"desc",e)},expression:"modal.desc"}})],1)],1),e("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[e("a-button",{style:{marginRight:"8px"},on:{click:t.onClose}},[t._v(" 取消")]),e("a-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v(" 确定")])],1)],1)},l=[],d=(a("d3b7"),{name:"VariableModel",data:function(){return{title:"操作",visible:!1,confirmLoading:!1,modal:{},url:{add:"/api/variable/add",update:"/api/variable/update"},rules:{key:[{required:!0,message:"请输入变量名",trigger:"blur"}],value:[{required:!0,message:"请输入变量值",trigger:"blur"}]},isEdit:!1}},methods:{add:function(){this.edit({})},edit:function(t){this.modal=JSON.parse(JSON.stringify(t)),this.isEdit=!!t.key,this.visible=!0},onClose:function(){this.visible=!1},handleOk:function(){var t=this,e=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;var n;e.confirmLoading=!0,n=t.isEdit?Object(o["d"])(t.url.update,t.modal):Object(o["c"])(t.url.add,t.modal),n.then((function(t){200===t.code?(e.$message.success("保存成功"),e.$emit("ok")):e.$message.error(t.message)})).finally((function(){e.confirmLoading=!1,e.onClose()}))}))},filterOption:function(t,e){return!!e.componentOptions.children[0].text&&e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}}),s=d,c=a("2877"),u=Object(c["a"])(s,i,l,!1,null,"0fe6bf9a",null),m=u.exports,p={name:"VariableList",components:{VariableModel:m},data:function(){return{columns:[{title:"变量",dataIndex:"key",width:"20%",scopedSlots:{customRender:"key"}},{title:"值",dataIndex:"value",width:"25%"},{title:"说明",dataIndex:"desc",scopedSlots:{customRender:"desc"}},{title:"来源",dataIndex:"type",width:"20%",scopedSlots:{customRender:"type"}},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],dataSource:[],loading:!0,queryParam:{}}},mounted:function(){this.loadData()},methods:{loadData:function(){var t=this;this.loading=!0,Object(o["c"])("/api/variable/list",this.queryParam).then((function(e){t.dataSource=e.data,t.loading=!1}))},handleDelete:function(t){var e=this;Object(o["c"])("/api/variable/remove",t).then((function(t){200===t.code?(e.$message.success("删除成功"),e.loadData()):e.$message.error("删除失败")}))},handleAdd:function(){this.$refs.VariableModel.add()},handleEdit:function(t){this.$refs.VariableModel.edit(t)},reset:function(){this.queryParam={},this.loadData()}}},f=p,b=Object(c["a"])(f,n,r,!1,null,null,null);e["default"]=b.exports}}]);