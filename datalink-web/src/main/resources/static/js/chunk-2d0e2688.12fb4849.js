(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e2688"],{"7f25":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",{attrs:{breadcrumb:!1}},[a("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0},bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:7,sm:24}},[a("a-form-item",{attrs:{label:"规则名称"}},[a("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.queryParam.ruleName,callback:function(t){e.$set(e.queryParam,"ruleName",t)},expression:"queryParam.ruleName"}})],1)],1),a("a-col",{attrs:{md:14,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:e.loadData}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1),a("a-col",{staticStyle:{"text-align":"right"},attrs:{md:3,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建规则")])],1)],1)],1)],1)]),a("a-card",{attrs:{"body-style":{minHeight:"500px"},bordered:!1}},[a("a-table",{ref:"table",attrs:{columns:e.columns,"data-source":e.dataSource,rowKey:"ruleId",pagination:!1,loading:e.loading},scopedSlots:e._u([{key:"serial",fn:function(t,n,r){return a("span",{},[e._v(" "+e._s(r+1)+" ")])}},{key:"ruleName",fn:function(t,n,r){return a("span",{},[a("a",{on:{click:function(t){return e.handleRuntime(n)}}},[e._v(e._s(t))])])}},{key:"sourceResourceName",fn:function(t,n,r){return a("span",{},[e._v(" "+e._s(e.getResourceNameStr(n.sourceResourceList))+" ")])}},{key:"destResourceName",fn:function(t,n,r){return a("span",{},[e._v(" "+e._s(e.getResourceNameStr(n.destResourceList))+" ")])}},{key:"enable",fn:function(t,n,r){return a("span",{},[a("a-switch",{attrs:{checked:t},on:{change:function(t){return e.enableChange(n)}}})],1)}},{key:"action",fn:function(t,n){return a("span",{},[a("a",{attrs:{disabled:n.enable},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])],1)}}])})],1)],1)},r=[],o=(a("a15b"),a("0fea")),s={name:"RuleList",components:{},data:function(){return{loading:!0,columns:[{title:"规则名称",dataIndex:"ruleName",scopedSlots:{customRender:"ruleName"}},{title:"数据源",dataIndex:"sourceResourceName",scopedSlots:{customRender:"sourceResourceName"}},{title:"目的资源",dataIndex:"destResourceName",scopedSlots:{customRender:"destResourceName"}},{title:"启动",dataIndex:"enable",scopedSlots:{customRender:"enable"}},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],dataSource:[],queryParam:{},url:{list:"/api/rule/list",remove:"/api/rule/remove",update:"/api/rule/update",start:"/api/rule/start",stop:"/api/rule/stop",runtime:"/api/rule/runtime"}}},mounted:function(){this.loadData()},methods:{handleAdd:function(){this.$router.push({path:"/rule/info/new"})},handleEdit:function(e){this.$router.push({path:"/rule/info/"+e.ruleId})},handleRuntime:function(e){this.$router.push({path:"/rule/runtime/"+e.ruleId})},loadData:function(){var e=this;this.loading=!0,Object(o["c"])(this.url.list,this.queryParam).then((function(t){e.dataSource=t.data,e.loading=!1}))},handleStart:function(e){var t=this;Object(o["c"])(this.url.start,e).then((function(e){200===e.code?(t.$message.success("启动成功"),t.loadData()):t.$message.error("启动失败")}))},handleStop:function(e){var t=this;this.$confirm({title:"停止此规则?",content:e.ruleName,onOk:function(){Object(o["c"])(t.url.stop,e).then((function(e){200===e.code?(t.$message.success("停止成功"),t.loadData()):t.$message.error("停止失败")}))}})},handleDelete:function(e){var t=this;this.$confirm({title:"删除此规则?",content:e.ruleName,okType:"danger",onOk:function(){Object(o["c"])(t.url.remove,e).then((function(e){200===e.code?(t.$message.success("删除成功"),t.loadData()):t.$message.error("删除失败")}))}})},enableChange:function(e){e.enable?this.handleStop(e):this.handleStart(e)},getResourceNameStr:function(e){for(var t=[],a=e.length-1;a>=0;a--)t.push(e[a].resourceName);return t.join(",")},reset:function(){this.queryParam={},this.loadData()}}},u=s,c=a("2877"),i=Object(c["a"])(u,n,r,!1,null,null,null);t["default"]=i.exports}}]);