(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04145c58"],{"0fea":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return n}));var o=r("b775");function a(e,t){return Object(o["b"])({url:e,method:"post",data:t})}function s(e,t){return Object(o["b"])({url:e,method:"put",data:t})}function n(e,t){return Object(o["b"])({url:e,method:"get",params:t})}},8746:function(e,t,r){"use strict";r("a315")},a315:function(e,t,r){},cb99:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-header-wrapper",[r("a-card",{attrs:{hoverable:"",bordered:!1}},[r("div",{staticClass:"table-operator"}),r("a-list",{attrs:{grid:{gutter:24,lg:4,md:2,sm:1,xs:1},loading:e.loading,"data-source":e.data},scopedSlots:e._u([{key:"renderItem",fn:function(t){return r("a-list-item",{},[t&&void 0!==t.resourceId?[r("a-card",[r("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.resourceName))]),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:7}},[r("div",[e._v("资源ID：")])]),r("a-col",{attrs:{span:12}},[r("div",[e._v(e._s(t.resourceId))])])],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:7}},[r("div",[e._v("协议类型：")])]),r("a-col",{attrs:{span:12}},[r("div",[e._v(e._s(e.resourceTypeMap[t.resourceType]))])])],1),r("a",{attrs:{slot:"actions"},on:{click:function(r){return e.handleEdit(t)}},slot:"actions"},[e._v("编辑")]),r("a-popconfirm",{attrs:{slot:"actions",title:"Sure to delete?"},on:{confirm:function(){return e.handleDelete(t)}},slot:"actions"},[r("a",{attrs:{href:"javascript:;"}},[e._v("删除")])])],1)]:[r("a-button",{staticClass:"new-btn",staticStyle:{height:"194px"},attrs:{type:"dashed"},on:{click:function(t){return e.handleAdd()}}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" 新增资源 ")],1)]],2)}}])}),r("resource-model",{ref:"ResourceModel",on:{ok:e.loadData}})],1)],1)},a=[],s=r("0fea"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-drawer",{attrs:{confirmLoading:e.confirmLoading,title:"资源",width:720,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.modal,layout:"vertical",rules:e.rules}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"资源类型",prop:"resourceType"}},[r("a-select",{attrs:{placeholder:"请选择资源类型"},model:{value:e.modal.resourceType,callback:function(t){e.$set(e.modal,"resourceType",t)},expression:"modal.resourceType"}},[r("a-select-option",{attrs:{value:"MQTT"}},[e._v(" MQTT Broker")])],1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"资源名称",prop:"resourceName"}},[r("a-input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.modal.resourceName,callback:function(t){e.$set(e.modal,"resourceName",t)},expression:"modal.resourceName"}})],1)],1)],1),"MQTT"===e.modal.resourceType?r("mqtt-properties",{ref:"PropertiesModal"}):e._e(),r("a-form-model-item",{attrs:{label:"备注",prop:"description"}},[r("a-textarea",{attrs:{rows:4,placeholder:"请输入备注"},model:{value:e.modal.description,callback:function(t){e.$set(e.modal,"description",t)},expression:"modal.description"}})],1)],1),r("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[r("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消")]),r("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(" 保存")])],1)],1)},i=[],l=(r("d3b7"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{attrs:{layout:"vertical",model:e.properties}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"URL"}},[r("a-input",{attrs:{placeholder:"请输入URL"},model:{value:e.properties.url,callback:function(t){e.$set(e.properties,"url",t)},expression:"properties.url"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"账户"}},[r("a-input",{attrs:{placeholder:"请输入账户"},model:{value:e.properties.username,callback:function(t){e.$set(e.properties,"username",t)},expression:"properties.username"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"密码"}},[r("a-input-password",{attrs:{placeholder:"请输入密码"},model:{value:e.properties.password,callback:function(t){e.$set(e.properties,"password",t)},expression:"properties.password"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接超时"}},[r("a-input",{attrs:{placeholder:"请输入连接超时"},model:{value:e.properties.connectionTimeout,callback:function(t){e.$set(e.properties,"connectionTimeout",t)},expression:"properties.connectionTimeout"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"保活间隔"}},[r("a-input",{attrs:{placeholder:"请输入保活间隔"},model:{value:e.properties.keepAliveInterval,callback:function(t){e.$set(e.properties,"keepAliveInterval",t)},expression:"properties.keepAliveInterval"}})],1)],1)],1)],1)}),c=[],d={data:function(){return{properties:{}}},methods:{set:function(e){this.properties=e},get:function(){return this.properties}}},u=d,p=r("2877"),m=Object(p["a"])(u,l,c,!1,null,"40546eb0",null),f=m.exports,h={name:"ResourceModel",components:{MqttProperties:f},data:function(){return{title:"操作",visible:!1,confirmLoading:!1,modal:{},url:{add:"/api/resource/add",update:"/api/resource/update"},rules:{resourceType:[{required:!0,message:"请选择资源类型",trigger:"blur"}],resourceName:[{required:!0,message:"请输入资源名称",trigger:"blur"}]}}},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.modal=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.modal.resourceType&&t.$refs.PropertiesModal.set(t.modal.properties)}))},onClose:function(){this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.ruleForm.validate((function(r){if(!r)return!1;var o;t.confirmLoading=!0,e.modal.properties=e.$refs.PropertiesModal.get(),o=e.modal.resourceId?Object(s["c"])(e.url.update,e.modal):Object(s["b"])(e.url.add,e.modal),o.then((function(e){200===e.code?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.onClose()}))}))},filterOption:function(e,t){return!!t.componentOptions.children[0].text&&t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},handleCancel:function(){this.onClose()}}},b=h,v=Object(p["a"])(b,n,i,!1,null,"1b056959",null),g=v.exports,k={name:"ResourceList",components:{ResourceModel:g},data:function(){return{loading:!0,data:[],url:{list:"/api/resource/list",remove:"/api/resource/remove",update:"/api/resource/update"},resourceTypeMap:{MQTT:"MQTT Broker"}}},created:function(){this.loadData()},methods:{handleAdd:function(){this.$refs.ResourceModel.add()},handleEdit:function(e){this.$refs.ResourceModel.edit(e)},loadData:function(){var e=this;this.loading=!0,Object(s["b"])(this.url.list,{}).then((function(t){e.data=t.data,e.data.unshift({}),e.loading=!1}))},handleDelete:function(e){var t=this;Object(s["b"])(this.url.remove,e).then((function(e){200===e.code?(t.$message.success("删除成功"),t.loadData()):t.$message.info(e.message)}))}}},x=k,T=(r("8746"),Object(p["a"])(x,o,a,!1,null,"439b67f4",null));t["default"]=T.exports}}]);