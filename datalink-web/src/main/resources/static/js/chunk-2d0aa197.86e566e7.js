(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa197"],{1024:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("page-header-wrapper",{attrs:{breadcrumb:!1}},[t("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0},bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"变量名"}},[t("a-input",{attrs:{placeholder:"请输入变量名"},model:{value:e.queryParam.key,callback:function(t){e.$set(e.queryParam,"key",t)},expression:"queryParam.key"}})],1)],1),t("a-col",{attrs:{md:10,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:e.loadData}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1),t("a-col",{staticStyle:{"text-align":"right"},attrs:{md:7,sm:24}},[t("a-button",{attrs:{icon:"undo"},on:{click:e.loadData}},[e._v("刷新")]),t("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建变量")])],1)],1)],1)],1)]),t("a-card",{attrs:{"body-style":{minHeight:"500px"},bordered:!1}},[t("a-table",{ref:"table",attrs:{rowKey:"key",columns:e.columns,"data-source":e.dataSource,pagination:!1,loading:e.loading},scopedSlots:e._u([{key:"key",fn:function(a,o,n){return t("span",{},[t("a-tag",{attrs:{color:"SYSTEM"===o.type?"cyan":"blue"}},[e._v(e._s(a))])],1)}},{key:"serial",fn:function(a,o,n){return t("span",{},[e._v(" "+e._s(n+1)+" ")])}},{key:"type",fn:function(a,o,n){return t("span",{},[e._v(" "+e._s(o.memberName?o.memberName:"SYSTEM"===a?"系统变量":"自定义")+" ")])}},{key:"desc",fn:function(a,o,n){return t("span",{},[e._v(" "+e._s(a||"-")+" ")])}},{key:"action",fn:function(a,o){return t("span",{},[[t("a",{attrs:{disabled:"CUSTOM"!==o.type},on:{click:function(t){return e.handleEdit(o)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),e.dataSource.length?t("a-popconfirm",{attrs:{title:"删除此变量?"},on:{confirm:function(){return e.handleDelete(o)}}},[t("a",{attrs:{href:"javascript:;",disabled:"CUSTOM"!==o.type}},[e._v("删除")])]):e._e()]],2)}}])})],1),t("variable-model",{ref:"VariableModel",on:{ok:e.loadData}})],1)},n=[],i=a("0fea"),r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{confirmLoading:e.confirmLoading,title:"全局变量",width:600,visible:e.visible,destroyOnClose:!0},on:{cancel:e.onClose}},[t("a-form-model",{ref:"ruleForm",attrs:{model:e.modal,layout:"vertical",rules:e.rules}},[t("a-form-model-item",{attrs:{label:"变量名",prop:"key"}},[t("a-input",{attrs:{placeholder:"请输入变量名",disabled:e.isEdit},model:{value:e.modal.key,callback:function(t){e.$set(e.modal,"key",t)},expression:"modal.key"}})],1),t("a-form-model-item",{attrs:{label:"值",prop:"value"}},[t("a-input",{attrs:{placeholder:"请输入变量值"},model:{value:e.modal.value,callback:function(t){e.$set(e.modal,"value",t)},expression:"modal.value"}})],1),t("a-form-model-item",{attrs:{label:"说明"}},[t("a-input",{attrs:{placeholder:"请输入说明"},model:{value:e.modal.desc,callback:function(t){e.$set(e.modal,"desc",t)},expression:"modal.desc"}})],1)],1),t("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[t("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消")]),t("a-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(" 确定")])],1)],1)},l=[],s=(a("d3b7"),{name:"VariableModel",data:function(){return{title:"操作",visible:!1,confirmLoading:!1,modal:{},url:{add:"/api/variable/add",update:"/api/variable/update"},rules:{key:[{required:!0,message:"请输入变量名",trigger:"blur"}],value:[{required:!0,message:"请输入变量值",trigger:"blur"}]},isEdit:!1}},methods:{add:function(){this.edit({})},edit:function(e){this.modal=JSON.parse(JSON.stringify(e)),this.isEdit=!!e.key,this.visible=!0},onClose:function(){this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;var o;t.confirmLoading=!0,o=e.isEdit?Object(i["d"])(e.url.update,e.modal):Object(i["c"])(e.url.add,e.modal),o.then((function(e){200===e.code?(t.$message.success("保存成功"),t.$emit("ok")):t.$message.error(e.message)})).finally((function(){t.confirmLoading=!1,t.onClose()}))}))},filterOption:function(e,t){return!!t.componentOptions.children[0].text&&t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}}),d=s,c=a("2877"),u=Object(c["a"])(d,r,l,!1,null,"5d985df4",null),m=u.exports,p={name:"VariableList",components:{VariableModel:m},data:function(){return{columns:[{title:"变量",dataIndex:"key",width:"20%",scopedSlots:{customRender:"key"}},{title:"值",dataIndex:"value",width:"25%"},{title:"说明",dataIndex:"desc",scopedSlots:{customRender:"desc"}},{title:"来源",dataIndex:"type",width:"20%",scopedSlots:{customRender:"type"}},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],dataSource:[],loading:!0,queryParam:{}}},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;this.loading=!0,Object(i["c"])("/api/variable/list",this.queryParam).then((function(t){e.dataSource=t.data,e.loading=!1}))},handleDelete:function(e){var t=this;Object(i["c"])("/api/variable/remove",e).then((function(e){200===e.code?(t.$message.success("删除成功"),t.loadData()):t.$message.error("删除失败")}))},handleAdd:function(){this.$refs.VariableModel.add()},handleEdit:function(e){this.$refs.VariableModel.edit(e)},reset:function(){this.queryParam={},this.loadData()}}},f=p,b=Object(c["a"])(f,o,n,!1,null,null,null);t["default"]=b.exports}}]);