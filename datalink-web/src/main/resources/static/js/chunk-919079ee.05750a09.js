(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-919079ee"],{"0fea":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return i}));var a=r("b775");function o(e,t){return Object(a["b"])({url:e,method:"post",data:t})}function s(e,t){return Object(a["b"])({url:e,method:"put",data:t})}function i(e,t){return Object(a["b"])({url:e,method:"get",params:t})}},"56fc":function(e,t,r){"use strict";r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return u}));r("99af"),r("b0c0");var a="all",o="dest",s={MQTT:{name:"MQTT Broker",type:a,details:{resource:{name:"资源地址",format:function(e){return e.properties.url}},rule:{name:"Topic",format:function(e){return e.properties.topic}}},dataFormat:'{\n  "topic":String,\n  "payload":String\n}'},KAFKA:{name:"Kafka",type:a,details:{resource:{name:"资源地址",format:function(e){return"".concat(e.properties.url)}},rule:{name:"Topic",format:function(e){return e.properties.topic}}}},MYSQL:{name:"Mysql",type:o,details:{resource:{name:"资源地址",format:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port)}},rule:{name:"SQL模板",format:function(e){return e.properties.sql}}}},POSTGRESQL:{name:"Postgresql",type:o,details:{resource:{name:"资源地址",format:function(e){return"".concat(e.properties.ip,":").concat(e.properties.port)}},rule:{name:"SQL模板",format:function(e){return e.properties.sql}}}}};function i(){var e={};for(var t in s)e[t]=s[t].name;return e}function n(){var e={};for(var t in s){var r=s[t].dataFormat;r&&(e[t]=r)}return e}var l=i(),p=n();function c(e){var t=[];for(var r in s){var o=s[r].type;if(!e||o===a||o===e){var i={name:s[r].name,code:r,type:o};t.push(i)}}return t}function u(e,t){if(!e||!t)return{name:"",value:""};var r=s[e.resourceType],a=r.details[t];return{name:a.name,value:a.format(e)}}},cb99:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-header-wrapper",{attrs:{breadcrumb:!1}},[r("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0}}},[r("div",{staticClass:"table-page-search-wrapper"},[r("a-form",{attrs:{layout:"inline"}},[r("a-row",{attrs:{gutter:20}},[r("a-col",{attrs:{md:7,sm:24}},[r("a-form-item",{attrs:{label:"资源名称"}},[r("a-input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.queryParam.resourceName,callback:function(t){e.$set(e.queryParam,"resourceName",t)},expression:"queryParam.resourceName"}})],1)],1),r("a-col",{attrs:{md:14,sm:24}},[r("a-button",{attrs:{type:"primary"},on:{click:e.loadData}},[e._v("查询")]),r("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1),r("a-col",{staticStyle:{"text-align":"right"},attrs:{md:3,sm:24}},[r("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建资源")])],1)],1)],1)],1)]),r("a-card",{attrs:{"body-style":{minHeight:"500px"}}},[r("a-list",{attrs:{grid:{gutter:20,lg:4,md:2,sm:1,xs:1},loading:e.loading,"data-source":e.data},scopedSlots:e._u([{key:"renderItem",fn:function(t){return r("a-list-item",{},[r("a-card",{attrs:{hoverable:""}},[r("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.resourceName))]),r("a-row",[r("a-col",{attrs:{span:7}},[r("div",[e._v("资源类型：")])]),r("a-col",{attrs:{span:12}},[r("div",[e._v(e._s(e.resourceTypeMap[t.resourceType]))])])],1),r("a-row",[r("a-col",{attrs:{span:7}},[r("div",[e._v(e._s(e.getDetails(t).name)+"：")])]),r("a-col",{attrs:{span:12}},[r("div",[e._v(e._s(e.getDetails(t).value))])])],1),r("a",{attrs:{slot:"actions"},on:{click:function(r){return e.handleEdit(t)}},slot:"actions"},[e._v("编辑")]),r("a-popconfirm",{attrs:{slot:"actions",title:"确定删除此资源?"},on:{confirm:function(){return e.handleDelete(t)}},slot:"actions"},[r("a",{attrs:{href:"javascript:;"}},[e._v("删除")])])],1)],1)}}])}),r("resource-model",{ref:"ResourceModel",on:{ok:e.loadData}})],1)],1)},o=[],s=r("0fea"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-drawer",{attrs:{confirmLoading:e.confirmLoading,title:"资源",width:720,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[r("a-form-model",{ref:"ruleForm",attrs:{model:e.modal,layout:"vertical",rules:e.rules}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"资源类型",prop:"resourceType"}},[r("a-select",{attrs:{placeholder:"请选择资源类型"},model:{value:e.modal.resourceType,callback:function(t){e.$set(e.modal,"resourceType",t)},expression:"modal.resourceType"}},e._l(e.resourceTypeList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.code}},[e._v(e._s(t.name))])})),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"资源名称",prop:"resourceName"}},[r("a-input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.modal.resourceName,callback:function(t){e.$set(e.modal,"resourceName",t)},expression:"modal.resourceName"}})],1)],1)],1),"MQTT"===e.modal.resourceType?r("mqtt-properties",{ref:"PropertiesModal"}):e._e(),"KAFKA"===e.modal.resourceType?r("kafka-properties",{ref:"PropertiesModal"}):e._e(),"MYSQL"===e.modal.resourceType?r("mysql-properties",{ref:"PropertiesModal"}):e._e(),"POSTGRESQL"===e.modal.resourceType?r("postgresql-properties",{ref:"PropertiesModal"}):e._e(),r("a-form-model-item",{attrs:{label:"备注",prop:"description"}},[r("a-textarea",{attrs:{rows:4,placeholder:"请输入备注"},model:{value:e.modal.description,callback:function(t){e.$set(e.modal,"description",t)},expression:"modal.description"}})],1)],1),r("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[r("a-button",{style:{marginRight:"10px",width:"110px"},on:{click:e.testDriver}},[e._v(" 测试连接")]),r("a-button",{style:{marginRight:"10px",width:"110px"},on:{click:e.onClose}},[e._v(" 取消")]),r("a-button",{style:{width:"110px"},attrs:{type:"primary"},on:{click:e.handleOk}},[e._v(" 保存")])],1)],1)},n=[],l=(r("d3b7"),r("56fc")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{attrs:{layout:"vertical",model:e.properties}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"URL"}},[r("a-input",{attrs:{placeholder:"请输入URL"},model:{value:e.properties.url,callback:function(t){e.$set(e.properties,"url",t)},expression:"properties.url"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"账户"}},[r("a-input",{attrs:{placeholder:"请输入账户"},model:{value:e.properties.username,callback:function(t){e.$set(e.properties,"username",t)},expression:"properties.username"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"密码"}},[r("a-input-password",{attrs:{placeholder:"请输入密码"},model:{value:e.properties.password,callback:function(t){e.$set(e.properties,"password",t)},expression:"properties.password"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接超时"}},[r("a-input",{attrs:{placeholder:"请输入连接超时"},model:{value:e.properties.connectionTimeout,callback:function(t){e.$set(e.properties,"connectionTimeout",t)},expression:"properties.connectionTimeout"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"保活间隔"}},[r("a-input",{attrs:{placeholder:"请输入保活间隔"},model:{value:e.properties.keepAliveInterval,callback:function(t){e.$set(e.properties,"keepAliveInterval",t)},expression:"properties.keepAliveInterval"}})],1)],1)],1)],1)},c=[],u={data:function(){return{properties:{connectionTimeout:10,keepAliveInterval:30}}},methods:{set:function(e){this.properties=Object.assign({},this.properties,e)},get:function(){return this.properties}}},d=u,m=r("2877"),f=Object(m["a"])(d,p,c,!1,null,"73b78c6a",null),b=f.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{attrs:{layout:"vertical",model:e.properties}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"URL"}},[r("a-input",{attrs:{placeholder:"请输入URL"},model:{value:e.properties.url,callback:function(t){e.$set(e.properties,"url",t)},expression:"properties.url"}})],1)],1)],1)],1)},h=[],g={data:function(){return{properties:{}}},methods:{set:function(e){this.properties=e},get:function(){return this.properties}}},x=g,y=Object(m["a"])(x,v,h,!1,null,"0fdfc1b1",null),k=y.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{attrs:{layout:"vertical",model:e.properties}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"IP"}},[r("a-input",{attrs:{placeholder:"请输入IP"},model:{value:e.properties.ip,callback:function(t){e.$set(e.properties,"ip",t)},expression:"properties.ip"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"端口"}},[r("a-input",{attrs:{placeholder:"请输入端口"},model:{value:e.properties.port,callback:function(t){e.$set(e.properties,"port",t)},expression:"properties.port"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"账户"}},[r("a-input",{attrs:{placeholder:"请输入账户"},model:{value:e.properties.username,callback:function(t){e.$set(e.properties,"username",t)},expression:"properties.username"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"密码"}},[r("a-input-password",{attrs:{placeholder:"请输入密码"},model:{value:e.properties.password,callback:function(t){e.$set(e.properties,"password",t)},expression:"properties.password"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"数据库名称"}},[r("a-input",{attrs:{placeholder:"请输入数据库名称"},model:{value:e.properties.databaseName,callback:function(t){e.$set(e.properties,"databaseName",t)},expression:"properties.databaseName"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接数初始大小"}},[r("a-input",{attrs:{placeholder:"请输入连接数初始大小"},model:{value:e.properties.initSize,callback:function(t){e.$set(e.properties,"initSize",t)},expression:"properties.initSize"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接数下限"}},[r("a-input",{attrs:{placeholder:"请输入连接池下限"},model:{value:e.properties.minIdle,callback:function(t){e.$set(e.properties,"minIdle",t)},expression:"properties.minIdle"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接数上限"}},[r("a-input",{attrs:{placeholder:"请输入连接数上限"},model:{value:e.properties.maxActive,callback:function(t){e.$set(e.properties,"maxActive",t)},expression:"properties.maxActive"}})],1)],1)],1)],1)},w=[],_={data:function(){return{properties:{port:3306,initSize:8,minIdle:1,maxActive:20}}},methods:{set:function(e){this.properties=Object.assign({},this.properties,e)},get:function(){return this.properties}}},T=_,O=Object(m["a"])(T,$,w,!1,null,"e7d8a422",null),P=O.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-form-model",{attrs:{layout:"vertical",model:e.properties}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"IP"}},[r("a-input",{attrs:{placeholder:"请输入IP"},model:{value:e.properties.ip,callback:function(t){e.$set(e.properties,"ip",t)},expression:"properties.ip"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"端口"}},[r("a-input",{attrs:{placeholder:"请输入端口"},model:{value:e.properties.port,callback:function(t){e.$set(e.properties,"port",t)},expression:"properties.port"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"账户"}},[r("a-input",{attrs:{placeholder:"请输入账户"},model:{value:e.properties.username,callback:function(t){e.$set(e.properties,"username",t)},expression:"properties.username"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"密码"}},[r("a-input-password",{attrs:{placeholder:"请输入密码"},model:{value:e.properties.password,callback:function(t){e.$set(e.properties,"password",t)},expression:"properties.password"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"数据库名称"}},[r("a-input",{attrs:{placeholder:"请输入数据库名称"},model:{value:e.properties.databaseName,callback:function(t){e.$set(e.properties,"databaseName",t)},expression:"properties.databaseName"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接数初始大小"}},[r("a-input",{attrs:{placeholder:"请输入连接数初始大小"},model:{value:e.properties.initSize,callback:function(t){e.$set(e.properties,"initSize",t)},expression:"properties.initSize"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接数下限"}},[r("a-input",{attrs:{placeholder:"请输入连接池下限"},model:{value:e.properties.minIdle,callback:function(t){e.$set(e.properties,"minIdle",t)},expression:"properties.minIdle"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"连接数上限"}},[r("a-input",{attrs:{placeholder:"请输入连接数上限"},model:{value:e.properties.maxActive,callback:function(t){e.$set(e.properties,"maxActive",t)},expression:"properties.maxActive"}})],1)],1)],1)],1)},S=[],j={data:function(){return{properties:{port:3306,initSize:8,minIdle:1,maxActive:20}}},methods:{set:function(e){this.properties=Object.assign({},this.properties,e)},get:function(){return this.properties}}},L=j,A=Object(m["a"])(L,M,S,!1,null,"92ce0c8a",null),I=A.exports,q={name:"ResourceModel",components:{MqttProperties:b,KafkaProperties:k,MysqlProperties:P,PostgresqlProperties:I},data:function(){return{title:"操作",visible:!1,confirmLoading:!1,modal:{},url:{add:"/api/resource/add",update:"/api/resource/update",test:"/api/resource/test"},rules:{resourceType:[{required:!0,message:"请选择资源类型",trigger:"blur"}],resourceName:[{required:!0,message:"请输入资源名称",trigger:"blur"}]},resourceTypeList:[]}},mounted:function(){this.resourceTypeList=Object(l["b"])()},methods:{add:function(){this.edit({})},edit:function(e){var t=this;this.modal=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.modal.resourceType&&t.$refs.PropertiesModal.set(t.modal.properties)}))},onClose:function(){this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.ruleForm.validate((function(r){if(!r)return!1;var a;t.confirmLoading=!0,e.modal.properties=e.$refs.PropertiesModal.get(),a=e.modal.resourceId?Object(s["c"])(e.url.update,e.modal):Object(s["b"])(e.url.add,e.modal),a.then((function(e){200===e.code?(t.$message.success("保存成功"),t.$emit("ok")):t.$message.error("保存失败")})).finally((function(){t.confirmLoading=!1,t.onClose()}))}))},filterOption:function(e,t){return!!t.componentOptions.children[0].text&&t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},testDriver:function(){var e=this;this.modal.properties=this.$refs.PropertiesModal.get(),Object(s["b"])(this.url.test,this.modal).then((function(t){200===t.code&&!0===t.data?e.$message.success("连接成功"):e.$message.error("连接失败")}))}}},N=q,R=Object(m["a"])(N,i,n,!1,null,"59bc0c24",null),D=R.exports,E={name:"ResourceList",components:{ResourceModel:D},data:function(){return{loading:!0,data:[],queryParam:{},url:{list:"/api/resource/list",remove:"/api/resource/remove",update:"/api/resource/update"},resourceTypeMap:l["d"]}},mounted:function(){this.loadData()},methods:{getDetails:function(e){return Object(l["a"])(e,"resource")},handleAdd:function(){this.$refs.ResourceModel.add()},handleEdit:function(e){this.$refs.ResourceModel.edit(e)},loadData:function(){var e=this;this.loading=!0,Object(s["b"])(this.url.list,this.queryParam).then((function(t){e.data=t.data,e.loading=!1}))},handleDelete:function(e){var t=this;Object(s["b"])(this.url.remove,e).then((function(e){200===e.code?(t.$message.success("删除成功"),t.loadData()):t.$message.info(e.message)}))},reset:function(){this.queryParam={},this.loadData()}}},z=E,Q=Object(m["a"])(z,a,o,!1,null,null,null);t["default"]=Q.exports}}]);