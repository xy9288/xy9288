(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd8276ae"],{"0fea":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return c}));var n=a("b775");function r(e,t){return Object(n["b"])({url:e,method:"post",data:t})}function o(e,t){return Object(n["b"])({url:e,method:"put",data:t})}function u(e,t){return Object(n["b"])({url:e,method:"get",params:t})}function s(e,t){return Object(n["b"])({url:e,params:t,method:"get",responseType:"blob"})}function c(e,t){return Object(n["b"])({url:e,method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}},"7f25":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("page-header-wrapper",{attrs:{breadcrumb:!1}},[t("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0},bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:"规则名称"}},[t("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:e.queryParam.ruleName,callback:function(t){e.$set(e.queryParam,"ruleName",t)},expression:"queryParam.ruleName"}})],1)],1),t("a-col",{attrs:{md:14,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:e.loadData}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1),t("a-col",{staticStyle:{"text-align":"right"},attrs:{md:3,sm:24}},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.handleAdd()}}},[e._v("新建规则")])],1)],1)],1)],1)]),t("a-card",{attrs:{"body-style":{minHeight:"500px"},bordered:!1}},[t("a-table",{ref:"table",attrs:{columns:e.columns,"data-source":e.dataSource,pagination:!1,loading:e.loading},scopedSlots:e._u([{key:"serial",fn:function(a,n,r){return t("span",{},[e._v(" "+e._s(r+1)+" ")])}},{key:"ruleName",fn:function(a,n,r){return t("span",{},[t("a",{on:{click:function(t){return e.handleRuntime(n)}}},[e._v(e._s(a))])])}},{key:"sourceResourceName",fn:function(a,n,r){return t("span",{},[e._v(" "+e._s(e.getResourceNameStr(n.sourceResourceList))+" ")])}},{key:"destResourceName",fn:function(a,n,r){return t("span",{},[e._v(" "+e._s(e.getResourceNameStr(n.destResourceList))+" ")])}},{key:"enable",fn:function(a,n,r){return t("span",{},[t("a-switch",{attrs:{checked:a},on:{change:function(t){return e.enableChange(n)}}})],1)}},{key:"action",fn:function(a,n){return t("span",{},[t("a",{attrs:{disabled:n.enable},on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])],1)}}])})],1)],1)},r=[],o=(a("a15b"),a("0fea")),u={name:"RuleList",components:{},data:function(){return{loading:!0,columns:[{title:"规则名称",dataIndex:"ruleName",scopedSlots:{customRender:"ruleName"}},{title:"数据源",dataIndex:"sourceResourceName",scopedSlots:{customRender:"sourceResourceName"}},{title:"目的资源",dataIndex:"destResourceName",scopedSlots:{customRender:"destResourceName"}},{title:"启动",dataIndex:"enable",scopedSlots:{customRender:"enable"}},{title:"操作",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],dataSource:[],queryParam:{},url:{list:"/api/rule/list",remove:"/api/rule/remove",update:"/api/rule/update",start:"/api/rule/start",stop:"/api/rule/stop",runtime:"/api/rule/runtime"}}},mounted:function(){this.loadData()},methods:{handleAdd:function(){this.$router.push({path:"/rule/info/new"})},handleEdit:function(e){this.$router.push({path:"/rule/info/"+e.ruleId})},handleRuntime:function(e){this.$router.push({path:"/rule/runtime/"+e.ruleId})},loadData:function(){var e=this;this.loading=!0,Object(o["c"])(this.url.list,this.queryParam).then((function(t){e.dataSource=t.data,e.loading=!1}))},handleStart:function(e){var t=this;Object(o["c"])(this.url.start,e).then((function(e){200===e.code?(t.$message.success("启动成功"),t.loadData()):t.$message.error("启动失败")}))},handleStop:function(e){var t=this;this.$confirm({title:"停止此规则?",content:e.ruleName,onOk:function(){Object(o["c"])(t.url.stop,e).then((function(e){200===e.code?(t.$message.success("停止成功"),t.loadData()):t.$message.error("停止失败")}))}})},handleDelete:function(e){var t=this;this.$confirm({title:"删除此规则?",content:e.ruleName,okType:"danger",onOk:function(){Object(o["c"])(t.url.remove,e).then((function(e){200===e.code?(t.$message.success("删除成功"),t.loadData()):t.$message.error("删除失败")}))}})},enableChange:function(e){e.enable?this.handleStop(e):this.handleStart(e)},getResourceNameStr:function(e){for(var t=[],a=e.length-1;a>=0;a--)t.push(e[a].resourceName);return t.join(",")},reset:function(){this.queryParam={},this.loadData()}}},s=u,c=a("2877"),i=Object(c["a"])(s,n,r,!1,null,null,null);t["default"]=i.exports}}]);