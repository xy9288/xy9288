(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd8276ae"],{"0fea":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=a("b775");function r(t,e){return Object(n["b"])({url:t,method:"post",data:e})}function s(t,e){return Object(n["b"])({url:t,method:"put",data:e})}function i(t,e){return Object(n["b"])({url:t,method:"get",params:e})}},"7f25":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",{attrs:{breadcrumb:!1}},[a("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0}}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{md:7,sm:24}},[a("a-form-item",{attrs:{label:"规则名称"}},[a("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:t.queryParam.ruleName,callback:function(e){t.$set(t.queryParam,"ruleName",e)},expression:"queryParam.ruleName"}})],1)],1),a("a-col",{attrs:{md:14,sm:24}},[a("a-button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1),a("a-col",{staticStyle:{"text-align":"right"},attrs:{md:3,sm:24}},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleAdd()}}},[t._v("新建规则")])],1)],1)],1)],1)]),a("a-card",{attrs:{"body-style":{minHeight:"500px"}}},[a("a-list",{attrs:{grid:{gutter:20,lg:3,md:1,sm:1,xs:1},loading:t.loading,"data-source":t.data},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("a-card",{attrs:{hoverable:""}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.ruleName))]),a("div",{attrs:{slot:"extra"},slot:"extra"},[e.enable?a("a-tag",{attrs:{color:"#1890ff"}},[t._v("运行中")]):t._e(),e.enable?t._e():a("a-tag",{attrs:{color:"#c2c0c0"}},[t._v("未启动")])],1),a("a-row",[a("a-col",{attrs:{span:5}},[a("div",[t._v("源数据：")])]),a("a-col",{attrs:{span:19}},[a("div",[t._v(t._s(e.sourceResource.resourceName))])])],1),a("a-row",[a("a-col",{attrs:{span:5}},[a("div",[t._v("目的资源：")])]),a("a-col",{attrs:{span:19}},[a("div",[t._v(t._s(t.getDestListNameStr(e.destResourceList)))])])],1),a("span",{attrs:{slot:"actions"},slot:"actions"},[e.enable?t._e():a("a",{on:{click:function(a){return t.handleStart(e)}}},[t._v("启动")]),e.enable?a("a",{on:{click:function(a){return t.handleStop(e)}}},[t._v("停止")]):t._e()]),e.enable?t._e():a("a",{attrs:{slot:"actions"},on:{click:function(a){return t.handleEdit(e)}},slot:"actions"},[t._v("编辑")]),e.enable?a("a",{attrs:{slot:"actions"},on:{click:function(a){return t.handleInfo(e)}},slot:"actions"},[t._v("状态")]):t._e(),e.enable?t._e():a("a-popconfirm",{attrs:{slot:"actions",title:"确定删除此规则?"},on:{confirm:function(){return t.handleDelete(e)}},slot:"actions"},[a("a",{attrs:{href:"javascript:;"}},[t._v("删除")])])],1)],1)}}])})],1),a("runtime-model",{ref:"RuntimeModel"})],1)},r=[],s=(a("a15b"),a("0fea")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{confirmLoading:t.confirmLoading,title:"运行状态",width:700,visible:t.visible},on:{cancel:t.onClose}},[a("a-descriptions",{attrs:{column:2}},[a("a-descriptions-item",{attrs:{label:"启动运行"}},[t._v(" "+t._s(t.runtime.startTime)+" ")]),a("a-descriptions-item",{attrs:{label:"最近处理"}},[t._v(" "+t._s(t.runtime.lastTime?t.runtime.lastTime:"无")+" ")]),a("a-descriptions-item",{attrs:{label:"处理成功"}},[t._v(" "+t._s(t.runtime.successCount)+" ")]),a("a-descriptions-item",{attrs:{label:"处理失败"}},[t._v(" "+t._s(t.runtime.failCount)+" ")])],1),a("a-table",{attrs:{columns:t.columns,"data-source":t.runtime.lastData,size:"small",pagination:!1},scopedSlots:t._u([{key:"data",fn:function(e){return a("span",{},[t._v(" "+t._s(e)+" ")])}}])}),a("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[a("a-button",{style:{marginRight:"8px"},on:{click:t.onClose}},[t._v(" 关闭")]),a("a-button",{attrs:{type:"primary"},on:{click:t.getRuntime}},[t._v(" 刷新")])],1)],1)},o=[],l={name:"RuntimeModel",components:{},data:function(){return{visible:!1,confirmLoading:!1,runtime:{},url:{runtime:"/api/rule/runtime"},columns:[{title:"时间",dataIndex:"time"},{title:"数据",dataIndex:"data",scopedSlots:{customRender:"data"}}],ruleId:null}},methods:{show:function(t){this.runtime={},this.ruleId=t,this.getRuntime(),this.visible=!0},onClose:function(){this.visible=!1},getRuntime:function(){var t=this;this.ruleId&&Object(s["a"])(this.url.runtime,{ruleId:this.ruleId}).then((function(e){200===e.code&&(t.runtime=e.data)}))}}},u=l,c=a("2877"),d=Object(c["a"])(u,i,o,!1,null,"506839b4",null),m=d.exports,p={name:"RuleList",components:{RuntimeModel:m},data:function(){return{loading:!0,data:[],queryParam:{},url:{list:"/api/rule/list",remove:"/api/rule/remove",update:"/api/rule/update",start:"/api/rule/start",stop:"/api/rule/stop",runtime:"/api/rule/runtime"}}},mounted:function(){this.loadData()},methods:{handleAdd:function(){this.$router.push({name:"ruleInfo",params:{ruleId:void 0}})},handleEdit:function(t){this.$router.push({name:"ruleInfo",params:{ruleId:t.ruleId}})},loadData:function(){var t=this;this.loading=!0,Object(s["b"])(this.url.list,this.queryParam).then((function(e){t.data=e.data,t.loading=!1}))},handleStart:function(t){var e=this;Object(s["b"])(this.url.start,t).then((function(t){200===t.code?(e.$message.success("启动成功"),e.loadData()):e.$message.error("启动失败")}))},handleStop:function(t){var e=this;Object(s["b"])(this.url.stop,t).then((function(t){200===t.code?(e.$message.success("停止成功"),e.loadData()):e.$message.error("停止失败")}))},handleDelete:function(t){var e=this;Object(s["b"])(this.url.remove,t).then((function(t){200===t.code?(e.$message.success("删除成功"),e.loadData()):e.$message.error("删除失败")}))},handleInfo:function(t){this.$refs.RuntimeModel.show(t.ruleId)},getDestListNameStr:function(t){for(var e=[],a=t.length-1;a>=0;a--)e.push(t[a].resourceName);return e.join(",")},reset:function(){this.queryParam={},this.loadData()}}},f=p,h=Object(c["a"])(f,n,r,!1,null,null,null);e["default"]=h.exports}}]);